/*!
 impleCode Admin
 Handles admin settings
 (c) 2021 impleCode - https://implecode.com
 */
if(typeof implecode==="undefined"){var implecode=[]}jQuery(document).ready(function(){var e=function(e,i){i.children().each(function(){jQuery(this).width(jQuery(this).width())});return i};var i=jQuery("body.post-type-al_product").find(".page-title-action:visible:first");if(ic_catalog.import_screen_url&&i.length!==0){i.after('<a id="import-export-link-page" href="'+ic_catalog.import_screen_url+'" class="page-title-action">'+ic_catalog.import_export+"</a>")}jQuery(".ic_chosen").chosen({width:"200px",search_contains:true,allow_single_deselect:true});jQuery(".sort-settings tbody").sortable({items:"tr:not(.ic-not-sortable)",update:function(){jQuery(".sort-settings tbody tr").each(function(){var e=jQuery(this).index();var i=jQuery(this).find("td .attribute-label");var t=jQuery(this).find("td .attribute-value");var n=jQuery(this).find("td .attribute-unit");var o=i.data("base_name");var a=t.data("base_name");var r=n.data("base_name");i.attr("name",o+e);t.attr("name",a+e);n.attr("name",r+e);e=e+1;jQuery(this).find("td .shipping-label").attr("name","_shipping-label"+e);jQuery(this).find("td .shipping-value").attr("name","_shipping"+e)})},helper:e,placeholder:"sort-settings-placeholder"});var n=new Array('input[name="archive_multiple_settings[category_archive_url]"]','input[name="archive_multiple_settings[seo_title]"]','input[name="archive_multiple_settings[seo_title_sep]"]','input[name="archive_multiple_settings[breadcrumbs_title]"]','input[name="archive_multiple_settings[enable_product_breadcrumbs]"]','input[name="archive_multiple_settings[product_listing_cats]"]','input[name="archive_multiple_settings[category_top_cats]"]','input[name="archive_multiple_settings[cat_template]"]');var o=new Array('input[name="archive_multiple_settings[product_listing_cats]"]','input[name="archive_multiple_settings[category_top_cats]"]','input[name="archive_multiple_settings[cat_template]"]','input[name="archive_multiple_settings[cat_image_disabled]"]');jQuery(".ic_radio_td").on("change"," .integration-mode-selection",function(){var e=false;var i=jQuery(this).is(":checked");var t=jQuery(this).val();if(i&&t==="simple"){e="simple"}else if(i&&t==="theme"){e="theme"}if(i){if(!e){jQuery(".simple_mode_settings").hide("slow");jQuery(".theme_mode_settings").hide("slow");jQuery(".advanced_mode_settings").show();jQuery(".advanced_mode_settings_inline").show();jQuery.each(n,function(e,i){jQuery(i).closest("tr").show()})}else if(e==="simple"){jQuery(".advanced_mode_settings").hide();jQuery(".theme_mode_settings").hide("slow");jQuery(".simple_mode_settings").show("slow");jQuery.each(n,function(e,i){})}else if(e==="theme"){jQuery(".advanced_mode_settings").hide();jQuery(".simple_mode_settings").hide("slow");jQuery(".theme_mode_settings").show("slow");jQuery(".advanced_mode_settings_inline").show();jQuery.each(n,function(e,i){jQuery(i).closest("tr").show()});jQuery.each(o,function(e,i){jQuery(i).closest("tr").hide()})}}});jQuery(".integration-mode-selection").trigger("change");jQuery(".implecode-review").on("click",".dashicons-no",function(){var e={action:"hide_review_notice",nonce:ic_catalog.nonce};jQuery.post(ajaxurl,e,function(){jQuery(".implecode-review").hide("slow")})});jQuery(".implecode-translate").on("click"," .dashicons-no",function(){var e={action:"hide_translate_notice",nonce:ic_catalog.nonce};jQuery.post(ajaxurl,e,function(){jQuery(".implecode-translate").hide("slow")})});jQuery(".implecode-review-thanks").on("click",".dashicons-yes",function(){jQuery(".implecode-review-thanks").hide("slow")});jQuery(".implecode-review").on("click","a",function(e){if(jQuery(this).hasClass("button")){e.preventDefault();var i={action:"hide_review_notice",forever:"yes",nonce:ic_catalog.nonce};jQuery.post(ajaxurl,i,function(){jQuery(".implecode-review").hide("slow")})}else{var i={action:"hide_review_notice",forever:"yes",nonce:ic_catalog.nonce};jQuery.post(ajaxurl,i,function(){jQuery(".implecode-review").hide("slow");jQuery(".implecode-review-thanks").show("slow")})}});jQuery(".implecode-review.is-dismissible").on("click",".notice-dismiss",function(e){var i={action:"hide_review_notice",nonce:ic_catalog.nonce};jQuery.post(ajaxurl,i)});jQuery(".ic-notice.is-dismissible").on("click",".notice-dismiss",function(e){var i=jQuery(this).closest(".is-dismissible").data("ic_dismissible");if(i!==undefined){var t={action:"hide_ic_notice",element:i,nonce:ic_catalog.nonce};jQuery.post(ajaxurl,t)}});jQuery(".al-box").on("click",".notice-dismiss",function(){var e=jQuery(this).closest(".al-box");e.css("opacity","0.5");var i=e.data("hash");if(i!==undefined){var t={action:"ic_ajax_hide_message",hash:i,nonce:ic_catalog.nonce};jQuery.post(ajaxurl,t,function(){e.hide("slow")})}});jQuery(function(){jQuery(".setting-content input, span.ic_tip").tooltip({position:{my:"left-48 top+37",at:"right+48 bottom-37",collision:"flip"},track:true,tooltipClass:"ui-ic-tooltip"})});jQuery("body").on("click",".add_catalog_media",function(){var t=jQuery(this);var n=t.parent("div");var o=t.prev("div");var a=n.children("#upload_type").val();wp.media.editor.send.attachment=function(e,i){if(a=="url"){n.children(".uploaded_image").val(i.url)}else{n.children(".uploaded_image").val(i.id)}n.children(".uploaded_image").trigger("change");o.children("img").attr("src",i.url);o.children("img").show();o.children(".catalog-reset-image-button").show();t.prev("div.implecode-admin-media-image.empty").removeClass("empty");t.hide();t.closest(".custom-uploader").addClass("active-image")};wp.media.editor.open(t);return false});jQuery(".implecode-admin-media-image, .blocks-widgets-container").on("click",".catalog-reset-image-button",function(){var e=jQuery(this);var i=e.closest(".custom-uploader");i.find(".uploaded_image").val("");var t=i.find(".default").val();i.find(".media-image").attr("src",t);if(t!==""){i.find(".media-image").show()}else{i.find(".media-image").hide()}e.parent("div").next(".add_catalog_media").show();e.parent(".implecode-admin-media-image").addClass("empty");e.hide();e.closest(".custom-uploader").removeClass("active-image")});jQuery(".wp-admin").on("submit","form#post",function(e){t(e)});jQuery(".wp-admin").on("click",".editor-post-publish-button",function(e){t(e)});function t(e){if(jQuery('input[name="_price"]').length){if(!jQuery('input[name="_price"]').valid()){e.preventDefault();jQuery("html, body").animate({scrollTop:jQuery("#_price-error").offset().top-200},100)}}}ic_autocomplete_setup();jQuery("form").on("change",".ic-input",function(){var e=jQuery(this);var i=e.val();var t=e.attr("name");var n=jQuery("form").find('[ic-show-when="'+t+'"]');if(n.length>0){n.each(function(){if(i){n.show()}else{n.hide()}})}});jQuery(".ic-input").trigger("change")});jQuery(window).on("load",function(){setTimeout(function(){if(jQuery("#al_product_short_desc").length&&jQuery("#al_product_short_desc .inside .mce-tinymce").length===0&&typeof tinymce!=="undefined"){if(typeof tinyMCEPreInit.mceInit["excerpt"]!=="undefined"){tinymce.init(tinyMCEPreInit.mceInit["excerpt"])}}},1e3)});jQuery(document).ready(function(e){e.ic={hooks:{action:{},filter:{}},addAction:function(e,i,t){jQuery.ic.addHook("action",e,i,t)},addFilter:function(e,i,t){jQuery.ic.addHook("filter",e,i,t)},doAction:function(e,i){jQuery.ic.doHook("action",e,null,i)},applyFilters:function(e,i,t){return jQuery.ic.doHook("filter",e,i,t)},removeAction:function(e,i){jQuery.ic.removeHook("action",e,i)},removeFilter:function(e,i){jQuery.ic.removeHook("filter",e,i)},addHook:function(e,i,t,n){if(undefined==jQuery.ic.hooks[e][i]){jQuery.ic.hooks[e][i]=[]}var o=jQuery.ic.hooks[e][i];if(undefined==n){n=i+"_"+o.length}jQuery.ic.hooks[e][i].push({tag:n,callable:t})},doHook:function(e,i,t,n){if(undefined!=jQuery.ic.hooks[e][i]){var o=jQuery.ic.hooks[e][i];for(var a=0;a<o.length;a++){if("action"==e){o[a].callable(n)}else{t=o[a].callable(t,n)}}}if("filter"==e){return t}},removeHook:function(e,i,t){if(undefined!=jQuery.ic.hooks[e][i]){var n=jQuery.ic.hooks[e][i];for(var o=n.length-1;o>=0;o--){if(undefined==t||t==n[o].tag)n.splice(o,1)}}}}});function ic_autocomplete_setup(){jQuery(".ic_autocomplete").each(function(){var i=false;var t=jQuery(this);var e=t.data("ic-autocomplete");if(e!==undefined&&!t.hasClass("ui-autocomplete-input")){t.autocomplete({source:e,minLength:0,change:function(e,i){t.trigger("change")},close:function(){i=true;setTimeout(function(){i=false},300)}}).on("focus",function(){var e=jQuery(this).val();if(!i&&e==""){jQuery(this).autocomplete("search")}})}})}if(typeof implecode.disable_body==="undefined"){implecode.disable_body=function(){jQuery("body").addClass("ic-disabled-body")}}if(typeof implecode.enable_body==="undefined"){implecode.enable_body=function(){jQuery("body").removeClass("ic-disabled-body")}}if(typeof implecode.disable_container==="undefined"){implecode.disable_container=function(e){e.addClass("ic-disabled-container")}}if(typeof implecode.enable_container==="undefined"){implecode.enable_container=function(e){e.removeClass("ic-disabled-container")}}