/*!
 impleCode Shopping Cart
 (c) 2020 http://implecode.com
 */
if(window.opera&&opera.toString()=="[object Opera]"){history.navigationMode="compatible";jQuery(".continue_shopping").click(function(){window.name=(new Date).getTime()});if(window.name!=""){window.name="";jQuery("html").hide();jQuery("body").css("background-color","#fff");window.location.reload(true)}}jQuery(document).ready(function(){check_if_cart_empty("fast",true);var n=ic_cart_ajax_object.dec_sep;var i=ic_cart_ajax_object.th_sep;var t=jQuery(".vat_rate").val();if(t!==undefined){t=parseFloat(t);t=parseFloat(t/100);var e=parseFloat(jQuery(".vat_rate_round").val())}else{t=parseFloat(0);var e=parseFloat(0)}var c;jQuery(document).on("change","#shopping-cart-container .edit-product-quantity",function(t){var e=0;var r=jQuery(this);var o=Number(r.val());var a=jQuery("#shopping-cart-container .cart-products tr").length;if(o===0){var n=r.parent().parent();a=a-1;n.hide("slow",function(){n.remove()});check_if_cart_empty("slow")}jQuery("input.edit-product-quantity").each(function(){e+=parseFloat(jQuery(this).val())});if(jQuery(".product-shopping-cart button .cart_button_text").length>0){var i=jQuery(".product-shopping-cart button .cart_button_text").text().split(" ");i.splice(0,1);i=i.join(" ");jQuery(".product-shopping-cart button .cart_button_text").text(e+" "+i)}ic_hide_products_table();clearTimeout(c);c=setTimeout(function(){var t=Number(r.val());if(t===o){var e=jQuery("#shopping-cart-container form").serialize();e=e+"&action=shopping_cart_products&raw=0&front=1";jQuery.post(product_object.ajaxurl,e,function(t){jQuery(".before-cart-products").remove();jQuery("table.cart-products").remove();jQuery("#shopping-cart-container form input[name='cart_content']").remove();jQuery("#shopping-cart-container form  .form-buttons").last().before(t);jQuery("#shopping-cart-container form  .form-buttons .to_cart_submit").show();ic_show_products_table()})}},400)});jQuery(document).on("click",".delete_product",function(){jQuery(this).parent().find(".edit-product-quantity").val(0).trigger("change")});jQuery(document).on("change","#shopping-cart-container .variation_select",function(){var e=jQuery(this);var r=e.closest("tr").find(".product_id").val();var t={};jQuery.ic.doAction("ic_cart_variation_before_update",e,r);e.closest("td.td-name").find(".variation_select").each(function(){this_value=jQuery(this).val();this_name=jQuery(this).attr("name");if(this_value==""){this_value="not_selected"}t[this_name]=this_value});var o=e.closest("tr").find(".edit-product-quantity").val();var a={action:"get_shopping_cart_product_price",selected_variation:t,product_id:r,quantity:o};ic_hide_products_table();jQuery.post(ic_cart_ajax_object.ajax_url,a,function(t){t=number_format(t,2,n,i);e.closest("tr").find(".td-price").text(t);ic_show_products_table();e.closest("tr").find(".edit-product-quantity").trigger("change");jQuery.ic.doAction("ic_cart_variation_after_update",e,r)})});jQuery(document).on("keydown","#shopping-cart-container .edit-product-quantity",function(t){if(t.keyCode==13){t.preventDefault();jQuery(this).trigger("change");return false}});jQuery("#shopping_cart_form").on("submit",function(){var t=form2string(jQuery("#shopping_cart_form :input:visible"));setCookie("shopping_form_fields",t)});var r=getCookie("shopping_form_fields");if(r!=null){cookie2form(r)}fix_cart_widget_width();jQuery(document).on("click",".restore-ic-cart",function(t){t.preventDefault();var e={action:"restore_shopping_cart",front:1};jQuery.post(ic_cart_ajax_object.ajax_url,e,function(t){t=JSON.parse(t);var e=jQuery(".restore-ic-cart").parent(".product-shopping-cart");e.html(t[0]);if(jQuery("#shopping-cart-container").length){jQuery("#shopping-cart-container").replaceWith(t[1])}})})});function fix_cart_widget_width(){var t=jQuery(".product-shopping-cart input").outerWidth();var e=t-29;jQuery("#shopping_cart_widget_container .product_widget_search").outerWidth(t);jQuery("#shopping_cart_widget_container .product-search-box").outerWidth(e)}if(typeof number_format!=="function"){function number_format(t,e,r,o){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var a=!isFinite(+t)?0:+t,n=!isFinite(+e)?0:Math.abs(e),i=typeof o==="undefined"?",":o,c=typeof r==="undefined"?".":r,u="",p=function(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r};u=(n?p(a,n):""+Math.round(a)).split(".");if(u[0].length>3){u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)}if((u[1]||"").length<n){u[1]=u[1]||"";u[1]+=new Array(n-u[1].length+1).join("0")}return u.join(c)}}function getCookie(t){var e=new RegExp(t+"=([^;]+)");var r=e.exec(document.cookie);return r!=null?unescape(r[1]):null}function form2string(t){return JSON.stringify(t.serializeArray())}function cookie2form(t){var e=JSON.parse(t);for(var r=0;r<e.length;r++){var o=e[r].name;var a=e[r].value;if(o!="cart_content"&&o!="captcha_code"){if(o=="cart_person"){jQuery(':radio[value="'+a+'"]').attr("checked",true)}else{jQuery("[name="+o+"]").val(a)}}}}var today=new Date;var expiry=new Date(today.getTime()+30*24*3600*1e3);function setCookie(t,e){document.cookie=t+"="+escape(e)+"; path=/; expires="+expiry.toGMTString()}function check_if_cart_empty(t,e){if(jQuery(".cart-products").length===0){return false}if(e!==undefined&&jQuery(".ic_cache").length){ic_hide_products_table();jQuery.when(update_checkout_products_table_html()).then(check_if_cart_empty(t));return false}var r=0;jQuery("input.edit-product-quantity").each(function(){if(jQuery(this).val()!=0){r=1}});if(r!=1){jQuery(".to_cart_submit").hide(t);jQuery(".no-products").show(t)}else{jQuery(".no-products").hide(t);jQuery(".to_cart_submit").show(t)}}if(typeof ic_roundto!=="function"){function ic_roundto(t,e){e=e*100;if(e!=0){e=1/e;t=Math.round(t*e*100)/100/e}return t}}function limitText(t,e){if(t.value.length>e){t.value=999;jQuery(t).trigger("change")}}if(typeof decode_number_format!=="function"){function decode_number_format(t,e,r){if(t===undefined){return 0}var o=t.replace(ic_cart_ajax_object.th_sep,"");if(ic_cart_ajax_object.dec_sep!=""){o=o.replace(ic_cart_ajax_object.dec_sep,".")}return parseFloat(o)}}if(typeof price_format!=="function"){function ic_price_format(t){var e={action:"ic_price_format",price:t};return jQuery.post(product_object.ajaxurl,e)}}function update_checkout_products_table(e){if(e["raw"]===1){}else{jQuery(".to_cart_submit").attr("disabled",true)}jQuery.post(product_object.ajaxurl,e,function(t){jQuery.when(apply_updated_products_table(t,e)).then(after_updated_products_table(t))})}function apply_updated_products_table(t,e){jQuery("table.cart-products").remove();if(e["raw"]===1){jQuery("#shopping-cart-submit-container .ic-form > form").prepend(t).append(function(){});return}else{jQuery("#shopping-cart-container form .form-buttons:last-child").before(t);jQuery(".to_cart_submit").attr("disabled",false);jQuery(".to_cart_submit").show();return}}function after_updated_products_table(t){jQuery.when(jQuery.ic.doAction("ic_checkout_table_updated",t)).then()}function update_checkout_products_table_html(t){if(!t){var e={action:"shopping_cart_products",front:1,raw:0};if(jQuery(".cart-products.raw").length){e["raw"]=1}}else{var e=t+"&action=shopping_cart_products&raw=0&front=1"}jQuery.when(update_checkout_products_table(e)).then(ic_show_products_table())}function ic_hide_products_table(){ic_disable_container(jQuery("#shopping-cart-container"))}function ic_show_products_table(){ic_enable_container(jQuery("#shopping-cart-container"))}